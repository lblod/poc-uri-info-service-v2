@prefix person:        <http://www.w3.org/ns/person#> .
@prefix ext:           <http://mu.semte.ch/vocabularies/ext/> .
@prefix frontend:      <http://lblod.data.gift/vocabularies/frontend/> .

@prefix mandaat:       <http://data.vlaanderen.be/ns/mandaat#> .
@prefix regorg:        <http://www.w3.org/ns/regorg#> .
@prefix foaf:          <http://xmlns.com/foaf/0.1/> .
@prefix ere:           <http://data.lblod.info/vocabularies/erediensten/> .
@prefix adms:          <http://www.w3.org/ns/adms#> .
@prefix besluit:       <http://data.vlaanderen.be/ns/besluit#> .
@prefix schema:        <http://schema.org/> .
@prefix org:           <http://www.w3.org/ns/org#> .
@prefix skos:          <http://www.w3.org/2004/02/skos/core#> .
@prefix mu:            <http://mu.semte.ch/vocabularies/core/> .
@prefix locn:          <http://www.w3.org/ns/locn#> .
@prefix adres:         <https://data.vlaanderen.be/ns/adres#> .
@prefix generiek:      <https://data.vlaanderen.be/ns/generiek#> .
@prefix organisatie:   <https://data.vlaanderen.be/ns/organisatie#> .
@prefix xsd:           <http://www.w3.org/2001/XMLSchema#> .
@prefix lblod:         <http://data.lblod.info/id/> .
@prefix rr:            <http://www.w3.org/ns/r2rml#>.
@prefix rml:           <http://semweb.mmlab.be/ns/rml#>.
@prefix ql:            <http://semweb.mmlab.be/ns/ql#> .
@prefix carml:         <http://carml.taxonic.com/carml/> .
@prefix :              <http://www.example.com/mapping/> .

# ui definition
ext:ui_person
  a                    frontend:UI ;
  frontend:contentType person:Person ; # required
  frontend:mainPage    ext:personlijke_gegevens ; # required
  frontend:pages       ( ext:personlijke_gegevens ext:contact_gegevens ext:posities ) .

############################################################################################################# first page
ext:personlijke_gegevens
  a                   frontend:Page ;
  frontend:ordering   "0"^^xsd:integer ;
  frontend:label      "Persoonlijke gegevens" ;
  frontend:title      ( "Persoonlijke gegevens:" ext:naam0 ) ;
  frontend:subTitle   ( ext:naam0 ) ;
  frontend:containers ( ext:persoon_gegevens_container ext:contact_gegevens_organisatie_container ) .

ext:naam0
  a                  frontend:Field ;
  frontend:ordering  "0"^^xsd:integer ;
  frontend:fieldType "STRING" ;
  frontend:fields    ( foaf:givenName foaf:familyName ) ;
  frontend:label     "" .

# first panel
ext:persoon_gegevens_container
  a                 frontend:Container ;
  frontend:ordering "0"^^xsd:integer ;
  frontend:title    ( "Persoonlijke gegevens" ) ;
  frontend:elements ( ext:personlijke_gegevens_element ) .

ext:personlijke_gegevens_element
  a                 frontend:Panel ;
  frontend:ordering "0"^^xsd:integer ;
  frontend:editable "true"^^xsd:boolean ;
  frontend:editForm ext:personlijke_gegevens_element_form ;
  frontend:fields   ( ext:voornaam ext:achternaam ) .

ext:voornaam
  a                  frontend:Field ;
  frontend:ordering  "0"^^xsd:integer ;
  frontend:fieldType "STRING" ;
  frontend:fields    ( foaf:givenName ) ;
  frontend:label     "Voornaam" .

ext:achternaam
  a                  frontend:Field ;
  frontend:ordering  "1"^^xsd:integer ;
  frontend:fieldType "STRING" ;
  frontend:fields    ( foaf:familyName ) ;
  frontend:label     "Achternaam" .

# form
ext:personlijke_gegevens_element_form
  a                   frontend:Form ;
  frontend:ordering   "0"^^xsd:integer ;
  frontend:title      ( "Persoonlijke gegevens" ) ;
  frontend:rml        :person, :mandataris, :contactPoint ;
  frontend:formFields ( ext:familyName_form ext:givenName_form ) .

ext:familyName_form
  a                  frontend:InputText ;
  frontend:ordering  "0"^^xsd:integer ;
  frontend:label     "Achternaam" ;
  frontend:fields    ( foaf:familyName ) ;
  frontend:predicate foaf:familyName .

ext:givenName_form
  a                  frontend:InputText ;
  frontend:ordering  "1"^^xsd:integer ;
  frontend:inputType frontend:Text ;
  frontend:label     "Voornaam" ;
  frontend:fields    ( foaf:givenName ) ;
  frontend:predicate foaf:givenName .


#rml
:person
  a                     rr:TriplesMap ;
  rml:logicalSource     [ rml:source               [ a                carml:Stream ;
                                                     carml:streamName "input" ; ] ;
                          rml:referenceFormulation ql:JSONPath ;
                          rml:iterator             "$" ] ;
  rr:subjectMap         [ rr:template "http://data.lblod.info/id/persoon/{person.id}" ;
                          rr:class    person:Person ] ;
  rr:predicateObjectMap [ rr:predicate mandaat:isAangesteldAls ;
                          rr:objectMap [ rr:parentTriplesMap :mandataris ] ] ;
  rr:predicateObjectMap [ rr:predicate foaf:familyName ;
                          rr:objectMap [ rml:reference "person.familyName" ] ] ;
  rr:predicateObjectMap [ rr:predicate mu:uuid ;
                          rr:objectMap [ rml:reference "person.id" ] ] ;
  rr:predicateObjectMap [ rr:predicate foaf:givenName ;
                          rr:objectMap [ rml:reference "person.givenName" ] ] .

:mandataris
  a                     rr:TriplesMap ;
  rml:logicalSource     [ rml:source               [ a                carml:Stream ;
                                                     carml:streamName "input" ; ] ;
                          rml:referenceFormulation ql:JSONPath ;
                          rml:iterator             "$" ] ;
  rr:subjectMap         [ rr:template "http://data.lblod.info/id/mandataris/{isAangesteldAls.id}" ;
                          rr:class    mandaat:EredienstMandataris ] ;
  rr:predicateObjectMap [ rr:predicate mandaat:isBestuurlijkeAliasVan ;
                          rr:objectMap [ rr:template "http://data.lblod.info/id/persoon/{person.id}" ] ] ;
  rr:predicateObjectMap [ rr:predicate mu:uuid ;
                          rr:objectMap [ rml:reference "isAangesteldAls.id" ] ] ;
  rr:predicateObjectMap [ rr:predicate schema:contactPoint ;
                          rr:objectMap [ rr:parentTriplesMap :contactPoint ] ] .

:contactPoint
  a                     rr:TriplesMap ;
  rml:logicalSource     [ rml:source               [ a                carml:Stream ;
                                                     carml:streamName "input" ; ] ;
                          rml:referenceFormulation ql:JSONPath ;
                          rml:iterator             "$" ] ;
  rr:subjectMap         [ rr:template "http://data.lblod.info/id/contactpunt/{contactPoint.id}" ;
                          rr:class    schema:ContactPoint ] ;
  rr:predicateObjectMap [ rr:predicate mu:uuid ;
                          rr:objectMap [ rml:reference "contactPoint.id" ] ] .


# second panel
ext:contact_gegevens_organisatie_container
  a                 frontend:Container ;
  frontend:ordering "1"^^xsd:integer ;
  frontend:title    ( "Contact Gegevens: Bestuur van de Eredienst" ) ;
  frontend:elements ( ext:contact_gegevens_organisatie_element ) .

ext:contact_gegevens_organisatie_element
  a                 frontend:Panel ;
  frontend:ordering "0"^^xsd:integer ;
  frontend:editable "true"^^xsd:boolean ;
  frontend:editForm ext:contact_gegevens_element_form ;
  frontend:fields   ( ext:organisatie ext:email1 ext:adres1 ext:tel1 ) .

ext:organisatie
  a                  frontend:Field ;
  frontend:ordering  "0"^^xsd:integer ;
  frontend:fieldType "STRING" ;
  frontend:source    ( mandaat:isAangesteldAls org:holds org:postIn generiek:isTijdspecialisatieVan
                       besluit:bestuurt ) ;
  frontend:fields    ( skos:prefLabel ) ;
  frontend:hasLink   ext:organisatie_link ;
  frontend:label     "Organisatie" .


ext:email1
  a                  frontend:Field ;
  frontend:ordering  "1"^^xsd:integer ;
  frontend:fieldType "STRING" ;
  frontend:source    ( mandaat:isAangesteldAls schema:contactPoint ) ;
  frontend:fields    ( schema:email ) ;
  frontend:label     "Email" .

ext:adres1
  a                  frontend:Field ;
  frontend:ordering  "2"^^xsd:integer ;
  frontend:fieldType "STRING" ;
  frontend:source    ( mandaat:isAangesteldAls schema:contactPoint locn:address ) ;
  frontend:fields    ( locn:fullAddress ) ;
  frontend:label     "Adres" .

ext:tel1
  a                  frontend:Field ;
  frontend:ordering  "3"^^xsd:integer ;
  frontend:fieldType "STRING" ;
  frontend:source    ( mandaat:isAangesteldAls schema:contactPoint ) ;
  frontend:fields    ( schema:telephone ) ;
  frontend:label     "Telefoonnummer" .



ext:organisatie_link
  a               frontend:Link ;
  frontend:source ( mandaat:isAangesteldAls org:holds org:postIn generiek:isTijdspecialisatieVan besluit:bestuurt ) .


#form2

ext:contact_gegevens_element_form
  a                   frontend:Form ;
  frontend:ordering   "0"^^xsd:integer ;
  frontend:title      ( "Contact Gegevens: Bestuur van de Eredienst" ) ;
  frontend:rml        :contactPoint2, :adres, :person2, :mandataris2 ;
  frontend:formFields ( ext:telephone1_form ext:address1_form ext:email1_form ) .

ext:telephone1_form
  a                  frontend:InputText ;
  frontend:ordering  "2"^^xsd:integer ;
  frontend:inputType frontend:Text ;
  frontend:label     "Telephone" ;
  frontend:source    ( mandaat:isAangesteldAls schema:contactPoint ) ;
  frontend:fields    ( schema:telephone ) ;
  frontend:predicate schema:telephone .

ext:email1_form
  a                  frontend:InputText ;
  frontend:ordering  "2"^^xsd:integer ;
  frontend:inputType frontend:Text ;
  frontend:label     "Email" ;
  frontend:source    ( mandaat:isAangesteldAls schema:contactPoint ) ;
  frontend:fields    ( schema:email ) ;
  frontend:predicate schema:email .

ext:address1_form
  a                  frontend:InputText ;
  frontend:ordering  "2"^^xsd:integer ;
  frontend:inputType frontend:Text ;
  frontend:label     "Address" ;
  frontend:source    ( mandaat:isAangesteldAls schema:contactPoint locn:address ) ;
  frontend:fields    ( locn:fullAddress ) ;
  frontend:predicate locn:fullAddress .


:person2
  a                     rr:TriplesMap ;
  rml:logicalSource     [ rml:source               [ a                carml:Stream ;
                                                     carml:streamName "input" ; ] ;
                          rml:referenceFormulation ql:JSONPath ;
                          rml:iterator             "$" ] ;
  rr:subjectMap         [ rr:template "http://data.lblod.info/id/persoon/{person.id}" ;
                          rr:class    person:Person ] ;
  rr:predicateObjectMap [ rr:predicate mandaat:isAangesteldAls ;
                          rr:objectMap [ rr:parentTriplesMap :mandataris2 ] ] ;
  rr:predicateObjectMap [ rr:predicate mu:uuid ;
                          rr:objectMap [ rml:reference "person.id" ] ] .

:mandataris2
  a                     rr:TriplesMap ;
  rml:logicalSource     [ rml:source               [ a                carml:Stream ;
                                                     carml:streamName "input" ; ] ;
                          rml:referenceFormulation ql:JSONPath ;
                          rml:iterator             "$" ] ;
  rr:subjectMap         [ rr:template "http://data.lblod.info/id/mandataris/{isAangesteldAls.id}" ;
                          rr:class    mandaat:EredienstMandataris ] ;
  rr:predicateObjectMap [ rr:predicate mandaat:isBestuurlijkeAliasVan ;
                          rr:objectMap [ rr:template "http://data.lblod.info/id/persoon/{person.id}" ] ] ;
  rr:predicateObjectMap [ rr:predicate mu:uuid ;
                          rr:objectMap [ rml:reference "isAangesteldAls.id" ] ] ;
  rr:predicateObjectMap [ rr:predicate schema:contactPoint ;
                          rr:objectMap [ rr:parentTriplesMap :contactPoint2 ] ] .
:contactPoint2
  a                     rr:TriplesMap ;
  rml:logicalSource     [ rml:source               [ a                carml:Stream ;
                                                     carml:streamName "input" ; ] ;
                          rml:referenceFormulation ql:JSONPath ;
                          rml:iterator             "$" ] ;
  rr:subjectMap         [ rr:template "http://data.lblod.info/id/contactpunt/{contactPoint.id}" ;
                          rr:class    schema:ContactPoint ] ;
  rr:predicateObjectMap [ rr:predicate locn:address ;
                          rr:objectMap [ rr:template "http://data.lblod.info/id/adres/{address.id}" ] ] ;
  rr:predicateObjectMap [ rr:predicate mu:uuid ;
                          rr:objectMap [ rml:reference "contactPoint.id" ] ] ;
  rr:predicateObjectMap [ rr:predicate schema:email ;
                          rr:objectMap [ rml:reference "contactPoint.email" ] ] ;
  rr:predicateObjectMap [ rr:predicate schema:telephone ;
                          rr:objectMap [ rml:reference "contactPoint.telephone" ] ] .

:adres
  a                     rr:TriplesMap ;
  rml:logicalSource     [ rml:source               [ a                carml:Stream ;
                                                     carml:streamName "input" ; ] ;
                          rml:referenceFormulation ql:JSONPath ;
                          rml:iterator             "$" ] ;
  rr:subjectMap         [ rr:template "http://data.lblod.info/id/adres/{address.id}" ;
                          rr:class    locn:Address ] ;
  rr:predicateObjectMap [ rr:predicate mu:uuid ;
                          rr:objectMap [ rml:reference "address.id" ] ] ;
  rr:predicateObjectMap [ rr:predicate locn:fullAddress ;
                          rr:objectMap [ rml:reference "address.fullAddress"@nl ] ] .


############################################################################################################ second page
ext:contact_gegevens
  a                   frontend:Page ;
  frontend:ordering   "1"^^xsd:integer ;
  frontend:label      "Contactgegevens" ;
  frontend:title      ( "Contactgegevens" ) ;
  frontend:subTitle   ( ext:naam0 ) ;
  frontend:containers ( ext:contactgegevens_container ) .

ext:contactgegevens_container
  a                 frontend:Container ;
  frontend:ordering "0"^^xsd:integer ;
  frontend:title    ( "" ) ;
  frontend:elements ( ext:contactgegevens_table ) .

ext:contactgegevens_table
  a                 frontend:Table ;
  frontend:ordering "0"^^xsd:integer ;
  frontend:source   ( mandaat:isAangesteldAls ) ;
  frontend:editable "true"^^xsd:boolean ;
  frontend:fields   ( ext:positie ext:organisatie1 ext:email2 ext:tel2 ext:adres2 ) .

ext:positie
  a                  frontend:Field ;
  frontend:ordering  "0"^^xsd:integer ;
  frontend:fieldType "STRING" ;
  frontend:source    ( org:holds org:role ) ;
  frontend:hasLink   ext:positie_person_link ;
  frontend:fields    ( skos:prefLabel ) ;
  frontend:label     "Positie" .

ext:positie_person_link
  a               frontend:Link ;
  frontend:source ( org:holds org:postIn ) .

ext:organisatie1
  a                  frontend:Field ;
  frontend:ordering  "1"^^xsd:integer ;
  frontend:fieldType "STRING" ;
  frontend:source    ( org:holds org:postIn generiek:isTijdspecialisatieVan besluit:bestuurt ) ;
  frontend:hasLink   ext:org_contact_link ;
  frontend:fields    ( skos:prefLabel ) ;
  frontend:label     "Organisatie" .

ext:org_contact_link
  a               frontend:Link ;
  frontend:source ( org:holds org:postIn generiek:isTijdspecialisatieVan besluit:bestuurt ) .

ext:email2
  a                  frontend:Field ;
  frontend:ordering  "2"^^xsd:integer ;
  frontend:fieldType "STRING" ;
  frontend:source    ( schema:contactPoint ) ;
  frontend:fields    ( schema:email ) ;
  frontend:label     "Email" .

ext:tel2
  a                  frontend:Field ;
  frontend:ordering  "3"^^xsd:integer ;
  frontend:fieldType "STRING" ;
  frontend:source    ( schema:contactPoint ) ;
  frontend:fields    ( schema:telephone ) ;
  frontend:label     "Telefoonnummer" .

ext:adres2
  a                  frontend:Field ;
  frontend:ordering  "4"^^xsd:integer ;
  frontend:fieldType "STRING" ;
  frontend:source    ( schema:contactPoint locn:address ) ;
  frontend:fields    ( locn:fullAddress ) ;
  frontend:label     "Adres" .
############################################################################################################ third page
ext:posities
  a                   frontend:Page ;
  frontend:ordering   "2"^^xsd:integer ;
  frontend:title      ( "Posities" ) ;
  frontend:label      "Posities" ;
  frontend:subTitle   ( "" ) ;
  frontend:containers ( ext:posities_container ) .

ext:posities_container
  a                 frontend:Container ;
  frontend:ordering "0"^^xsd:integer ;
  frontend:title    ( "" ) ;
  frontend:elements ( ext:posities-table ) .



ext:posities-table
  a                 frontend:Table ;
  frontend:ordering "0"^^xsd:integer ;
  frontend:source   ( mandaat:isAangesteldAls ) ;
  frontend:fields   ( ext:rol ext:organisatie2 ext:status ) ;
  frontend:editable "true"^^xsd:boolean .

ext:rol
  a                  frontend:Field ;
  frontend:ordering  "0"^^xsd:integer ;
  frontend:fieldType "STRING" ;
  frontend:source    ( org:holds org:role ) ;
  frontend:fields    ( skos:prefLabel ) ;
  frontend:hasLink   ext:positie_person_link2 ;
  frontend:label     "Rol" .

ext:positie_person_link2
  a               frontend:Link ;
  frontend:source ( org:holds org:postIn ) .

ext:organisatie2
  a                  frontend:Field ;
  frontend:ordering  "1"^^xsd:integer ;
  frontend:fieldType "STRING" ;
  frontend:source    ( org:holds org:postIn generiek:isTijdspecialisatieVan besluit:bestuurt ) ;
  frontend:fields    ( skos:prefLabel ) ;
  frontend:hasLink   ext:org_positie_link ;
  frontend:label     "Organisatie" .

ext:org_positie_link
  a               frontend:Link ;
  frontend:source ( org:holds org:postIn generiek:isTijdspecialisatieVan besluit:bestuurt ) .

ext:status
  a                  frontend:Field ;
  frontend:ordering  "2"^^xsd:integer ;
  frontend:fieldType "STRING" ;
  frontend:source    ( mandaat:status ) ;
  frontend:fields    ( skos:prefLabel ) ;
  frontend:label     "Status" .

# todo add frontend:CustomElement

